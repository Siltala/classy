ECAS
----

``Eight Color Asteroid Survey``

.. tab-set::

  .. tab-item:: Basics

    +-------------------+-----------------------+------------------------+-------------------------------------------------------------------------------------+
    | Number of Spectra | :math:`\lambda_{min}` | :math:`\lambda_{max}`  | Reference                                                                           |
    +-------------------+-----------------------+------------------------+-------------------------------------------------------------------------------------+
    | 589               | 0.337µm               | 1.041µm                | `Zellner+ 1985 <https://ui.adsabs.harvard.edu/abs/1985Icar...61..355Z>`_            |
    +-------------------+-----------------------+------------------------+-------------------------------------------------------------------------------------+

    .. image:: gfx/sources/ecas_laetitia.png
       :class: only-light
       :align: center
       :width: 600

    .. image:: gfx/sources/ecas_laetitia_dark.png
       :class: only-dark
       :align: center
       :width: 600

  .. tab-item:: Data

    When the first ECAS spectrum is requested, ``classy`` downloads the entire
    survey results (130KB) from NASA PDS to the :ref:`cache
    directory<cache_directory>` for quick access.

    The following attributes are copied from the ECAS archive and added to each spectrum.
    See the `corresponding PDS page <https://sbn.psi.edu/pds/resource/ecas.html>`_ for details.

    +------------------------+-----------------------------------------------------------------------------------------------------------------------------+
    | Attribute              | Description                                                                                                                 |
    +------------------------+-----------------------------------------------------------------------------------------------------------------------------+
    | ``nights``             | The number of averaged nights to determine the colour value.                                                                |
    +------------------------+-----------------------------------------------------------------------------------------------------------------------------+

    .. important::
        Compared to the original catalogue, cells with value `-9.999` were replaced with `np.nan`
        values.

    These attributes are added by ``classy``.

    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | Attribute                    | Description                                                                                                         |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``name``                     | Name or provisional designation of the target asteroid.                                                             |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``number``                   | Number of the target asteroid.                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_S_V``                 | ``0`` if the uncertainty of the colour is below the limit defined in Tholen 1984 for high-quality data, else ``1``. |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_U_V``                 | Same as above.                                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_B_V``                 | Same as above.                                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_V_W``                 | Same as above.                                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_V_X``                 | Same as above.                                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag_V_P``                 | Same as above.                                                                                                      |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``flag``                     | ``1`` if any of the individual colour flags is ``1`` else ``0``.                                                    |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``shortbib``                 | ``'Zellner+ 1985'``                                                                                                 |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``bibcode``                  | ``'1985Icar...61..355Z'``                                                                                           |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | ``source``                   | ``'ECAS'``                                                                                                          |
    +------------------------------+---------------------------------------------------------------------------------------------------------------------+

  .. tab-item:: Taxonomies

    ECAS observations can be classified in the following taxonomic schemes.

    +-----------------------------------+-------------+---------------------------------+
    | Tholen 1984                       | DeMeo+ 2009 | Mahlke+ 2022                    |
    +-----------------------------------+-------------+---------------------------------+
    | Yes                               | No          | Yes (:math:`\lambda \geq 0.45`) |
    +-----------------------------------+-------------+---------------------------------+

  .. tab-item:: Usage

    From the command line:

    .. code-block:: bash

        $ classy spectra 39 --source ECAS
        INFO     [classy] Looking for reflectance spectra of (39) Laetitia
        INFO     [classy] Found 1 spectrum in ECAS

    In a script:

    .. code-block:: python

       >>> import classy
       >>> spectra = classy.Spectra(39, source="ECAS")
       >>> spec = spectra[0]  # Source 'ECAS' only returns one spectrum
       >>> spec.wave
       array([0.337, 0.359, 0.437, 0.55 , 0.701, 0.853, 0.948, 1.041])
       >>> spec.refl
       array([0.52625956, 0.62805836, 0.81208222, 1.        , 1.16949939,
              1.17273531, 1.15239138, 1.14077501])
       >>> spec.flag
       array([0, 0, 0, 0, 0, 0, 0, 0])

  .. tab-item:: Tutorials

    Relevant tutorials are

    - :ref:`Excluding points based on SNR or flag values<excluding_refl>`

    Please feel free to `contribute a tutorial <https://github.com/maxmahlke/classy/issues>`_ should you find an interesting use case.
